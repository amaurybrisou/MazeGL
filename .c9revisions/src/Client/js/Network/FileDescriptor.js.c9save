{"ts":1370615222457,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"(function () {\n    //load Builders \n    var f = function () {\n        if (typeof window.mmo == \"undefined\") {\n            window.Logger.log(window.Level.CRITICAL, \"Error : Namespace mmo not Loaded\", \"FileDescriptor.js\");\n            return false;\n        }\n        else if (typeof window.mmo.Network == \"undefined\") {\n            window.Logger.log(window.Level.NOOB, \"Error : Namespace mmo is altered\", \"FileDescriptor.js\");\n            return false;\n        }\n        return true;\n    };\n\n    if (!f()) {\n        return null;\n    }\n\n\n})();\n\n//Define Builder properties here\nwindow.mmo.Network.FileDescriptor = function () {\n    return (function () {\n        if (window.WebSocket) {\n            var ws = new WebSocket(window.mmo.SERVER_ADDR + \":\" + window.mmo.SERVER_PORT);\n        }\n        else {\n            console.log('Votre navigateur ne supporte pas les webSocket!');\n            return null;\n        }\n\n        ws.onopen = function () {\n\n        };\n\n        var obj, data, received_msg;\n        ws.onmessage = function (evt) {\n            received_msg = evt.data;\n\n            data = JSON.parse(received_msg);\n            \n            while(data.length > 0){\n                obj = data.shift();\n                if(typeof obj.TargetPosition !== \"undefined\"\n                 && typeof obj.AvatarPosition !== \"undefined\"){\n                    window.mmo.avatar_controls.move(obj);\n                }\n\n                 \n            }\n        };\n        ws.onclose = function (e) {\n            if (!e.wasClean) {\n                console.log(e.code + \" \" + e.reason);\n            }\n            console.log(\"Connection is closed...\");\n        };\n\n        return ws;\n\n    })();\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":1679}]],"length":1679}
{"contributors":[],"silentsave":true,"ts":1370615228499,"patch":[[{"diffs":[[0,"bSocket("],[1,"'ws://'+"],[0,"window.m"]],"start1":710,"start2":710,"length1":16,"length2":24}]],"length":1687,"saved":false}
